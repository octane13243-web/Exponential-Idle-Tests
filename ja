// Imports for Hodge SDK
import { theory } from "../api/Theory";
import { BigNumber } from "../api/BigNumber";
import { LinearCost, ExponentialCost, FreeCost } from "../api/Costs";
import { Utils } from "../api/Utils";

// Basic info
var id = "hodge_skeleton";
var name = "Hodge Skeleton";
var description = "Barebones skeleton for Hodge Conjecture theory.";
var authors = "horchata#0000";
var version = "0.1.0";

// Currency
var rho;

// Upgrades
var x1, x2;

// Internal state
var tickMultiplier = BigNumber.ONE;

// Init function
var init = () => {
    rho = theory.createCurrency();

    // Upgrades
    x1 = theory.createUpgrade(0, rho, new LinearCost(1, 1));
    x1.getDescription = (_) => "x1 upgrade";
    x1.getInfo = (amount) => "Level: " + x1.level;

    x2 = theory.createUpgrade(1, rho, new LinearCost(5, 5));
    x2.getDescription = (_) => "x2 upgrade";
    x2.getInfo = (amount) => "Level: " + x2.level;

    theory.createPublicationUpgrade(2, rho, 1e8);

    // Tick function
    theory.setTickFunction((elapsedTime, multiplier) => {
        // Convert everything to BigNumber
        let dt = BigNumber.from(elapsedTime).mul(BigNumber.from(multiplier));

        let x1val = BigNumber.ONE.add(BigNumber.from(x1.level));
        let x2val = BigNumber.ONE.add(BigNumber.from(x2.level));

        let gain = x1val.mul(x2val).mul(dt).mul(BigNumber.from(theory.publicationMultiplier));

        rho.value = rho.value.add(gain);
    });
};

// Call init to start
init();
