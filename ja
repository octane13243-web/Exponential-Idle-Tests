import { ExponentialCost, FirstFreeCost } from "./api/Costs";
import { BigNumber } from "./api/BigNumber";
import { theory } from "./api/Theory";
import { Utils } from "./api/Utils";

var id = "c1_log_rho";
var name = "Logarithmic Growth";
var description = "A simple theory based on logarithmic growth.";
var authors = "horchata";
var version = 1;

var currency;
var c1;

function init() {
    currency = theory.createCurrency();

    c1 = theory.createUpgrade(
        0,
        currency,
        new FirstFreeCost(new ExponentialCost(10, 1.15))
    );

    c1.getDescription = (_) => Utils.getMath("c1");
    c1.getInfo = (amount) =>
        Utils.getMathTo(
            "c1 = " + getC1Value(c1.level),
            "c1 = " + getC1Value(c1.level + amount)
        );

    // âœ… SAFE equation setters
    theory.setPrimaryEquation("\\rho = 2 \\cdot \\frac{\\log_{10}(c1)}{5}");
    theory.setEquationHeight(50);
}

function getC1Value(level) {
    return 2 + level;
}

function tick(elapsedTime, multiplier) {
    if (c1.level == 0) return;

    let dt = BigNumber.from(elapsedTime * multiplier);

    let c1Value = getC1Value(c1.level);
    let rhoDot = 2 * (Math.log10(c1Value) / 5);

    currency.value += dt * rhoDot;
}

init();
